```py
"""
Step 4: Add Protected Content and Logout (Complete)
- Show different content based on login status
- Add protected dashboard
- Implement logout functionality
"""

import streamlit as st
import hashlib

st.set_page_config(page_title="Authentication System", page_icon="ğŸ”", layout="centered")

users_db = {
    "admin": hashlib.sha256("admin123".encode()).hexdigest(),
    "user": hashlib.sha256("user123".encode()).hexdigest()
}

def hash_password(password):
    return hashlib.sha256(password.encode()).hexdigest()

def check_login(username, password):
    if username in users_db and users_db[username] == hash_password(password):
        return True
    return False

# Initialize session state
if 'logged_in' not in st.session_state:
    st.session_state.logged_in = False
if 'username' not in st.session_state:
    st.session_state.username = None

# STEP 1: Show different views based on login status
if not st.session_state.logged_in:
    # ========== LOGIN VIEW ==========
    st.title("ğŸ” Login")

    with st.form("login_form"):
        username = st.text_input("Username")
        password = st.text_input("Password", type="password")
        submitted = st.form_submit_button("Login", type="primary")

        if submitted:
            if check_login(username, password):
                st.session_state.logged_in = True
                st.session_state.username = username
                st.success("Login successful!")
                st.rerun()
            else:
                st.error("Invalid credentials")

    st.info("Demo credentials: admin/admin123 or user/user123")

else:
    # ========== LOGGED IN VIEW ==========
    # STEP 2: Show personalized welcome message
    st.title(f"Welcome, {st.session_state.username}! ğŸ‘‹")

    st.success("âœ… You are logged in!")

    # STEP 3: Display user session information
    col1, col2, col3 = st.columns(3)

    with col1:
        st.metric("Session Status", "Active âœ…")

    with col2:
        st.metric("User", st.session_state.username)

    with col3:
        # Different access level based on username
        access_level = "Admin" if st.session_state.username == "admin" else "User"
        st.metric("Access Level", access_level)

    st.divider()

    # STEP 4: Show protected content
    st.subheader("ğŸ”’ Protected Content")

    st.markdown("""
    This content is only visible to authenticated users!

    **You now have access to:**
    - Private dashboard
    - User profile
    - Settings and preferences
    - Secure data and reports
    """)

    # STEP 5: Add role-based content
    if st.session_state.username == "admin":
        st.warning("ğŸ‘‘ **Admin Panel**")
        st.write("You have administrator privileges!")
        st.write("- Manage users")
        st.write("- View system logs")
        st.write("- Configure settings")
    else:
        st.info("ğŸ‘¤ **User Dashboard**")
        st.write("Welcome to your personal dashboard!")

    st.divider()

    # STEP 6: Add some interactive protected features
    st.subheader("ğŸ“Š Your Dashboard")

    tab1, tab2, tab3 = st.tabs(["Overview", "Activity", "Settings"])

    with tab1:
        st.write("Dashboard overview goes here...")
        st.metric("Tasks Completed", "42")

    with tab2:
        st.write("Recent activity goes here...")
        st.write("- Logged in at 10:30 AM")
        st.write("- Updated profile")

    with tab3:
        st.write("User settings...")
        st.checkbox("Email notifications")
        st.checkbox("Dark mode")

    st.divider()

    # STEP 7: Implement logout functionality
    col1, col2, col3 = st.columns([1, 1, 1])

    with col2:
        if st.button("ğŸšª Logout", type="primary", use_container_width=True):
            # STEP 8: Clear session state on logout
            st.session_state.logged_in = False
            st.session_state.username = None
            st.success("Logged out successfully!")
            st.rerun()  # Refresh to show login form

# STEP 9: Add comprehensive documentation
with st.expander("ğŸ“š Authentication Flow Explained"):
    st.markdown("""
    ### Complete Authentication Flow

    #### 1. Login Process
    ```python
    if check_login(username, password):
        st.session_state.logged_in = True
        st.session_state.username = username
        st.rerun()
    ```

    #### 2. Protected Content
    ```python
    if st.session_state.logged_in:
        # Show protected content
    else:
        # Show login form
    ```

    #### 3. Logout Process
    ```python
    st.session_state.logged_in = False
    st.session_state.username = None
    st.rerun()
    ```

    ### Security Best Practices

    **For Production:**
    1. Use proper password hashing (bcrypt, Argon2)
    2. Implement HTTPS/SSL
    3. Add rate limiting for login attempts
    4. Use session timeouts
    5. Implement CSRF protection
    6. Store users in secure database
    7. Add two-factor authentication
    8. Log security events
    9. Implement password complexity requirements
    10. Add "remember me" functionality

    ### Role-Based Access Control (RBAC)

    You can extend this to support different user roles:
    ```python
    if st.session_state.role == "admin":
        # Show admin features
    elif st.session_state.role == "manager":
        # Show manager features
    else:
        # Show regular user features
    ```
    """)

st.divider()
st.caption("Built with Streamlit ğŸˆ")

```