```py
"""
Step 2: Create Input Controls and Basic Metrics
- Add sidebar controls for test parameters
- Calculate conversion rates
- Display basic metrics
"""

import streamlit as st

st.set_page_config(page_title="A/B Testing Dashboard", page_icon="ðŸ§ª", layout="wide")

st.title("ðŸ§ª A/B Testing Dashboard")

# STEP 1: Create sidebar controls for test configuration
st.sidebar.header("Test Configuration")

st.sidebar.subheader("Group A (Control)")

# STEP 2: Add inputs for Group A
visitors_a = st.sidebar.number_input(
    "Group A Visitors",
    min_value=1000,
    max_value=100000,
    value=10000,
    step=1000,
    help="Total number of visitors in control group"
)

conversions_a = st.sidebar.number_input(
    "Group A Conversions",
    min_value=100,
    max_value=visitors_a,
    value=1200,
    step=100,
    help="Number of conversions in control group"
)

st.sidebar.divider()

st.sidebar.subheader("Group B (Variant)")

# STEP 3: Add inputs for Group B
visitors_b = st.sidebar.number_input(
    "Group B Visitors",
    min_value=1000,
    max_value=100000,
    value=10000,
    step=1000,
    help="Total number of visitors in variant group"
)

conversions_b = st.sidebar.number_input(
    "Group B Conversions",
    min_value=100,
    max_value=visitors_b,
    value=1500,
    step=100,
    help="Number of conversions in variant group"
)

# STEP 4: Calculate conversion rates
conv_rate_a = conversions_a / visitors_a
conv_rate_b = conversions_b / visitors_b

# STEP 5: Display main metrics
st.subheader("ðŸ“Š Conversion Metrics")

col1, col2, col3 = st.columns(3)

# Group A metrics
with col1:
    st.metric(
        "Group A Conversion Rate",
        f"{conv_rate_a:.2%}",
        help="Control group conversion rate"
    )
    st.caption(f"{conversions_a:,} / {visitors_a:,} visitors")

# Group B metrics
with col2:
    st.metric(
        "Group B Conversion Rate",
        f"{conv_rate_b:.2%}",
        help="Variant group conversion rate"
    )
    st.caption(f"{conversions_b:,} / {visitors_b:,} visitors")

# STEP 6: Calculate and display improvement
with col3:
    # Calculate percentage improvement from A to B
    improvement = ((conv_rate_b - conv_rate_a) / conv_rate_a) * 100

    st.metric(
        "Improvement",
        f"{improvement:+.2f}%",
        delta=f"{improvement:.2f}%",
        help="Percentage change from Group A to Group B"
    )

    if improvement > 0:
        st.caption("ðŸŸ¢ Group B performs better")
    elif improvement < 0:
        st.caption("ðŸ”´ Group A performs better")
    else:
        st.caption("âšª No difference")

# STEP 7: Add detailed breakdown
st.divider()

st.subheader("ðŸ“‹ Detailed Breakdown")

# Create comparison table
import pandas as pd

comparison_df = pd.DataFrame({
    'Metric': ['Visitors', 'Conversions', 'Conversion Rate', 'Non-Conversions'],
    'Group A (Control)': [
        f"{visitors_a:,}",
        f"{conversions_a:,}",
        f"{conv_rate_a:.2%}",
        f"{visitors_a - conversions_a:,}"
    ],
    'Group B (Variant)': [
        f"{visitors_b:,}",
        f"{conversions_b:,}",
        f"{conv_rate_b:.2%}",
        f"{visitors_b - conversions_b:,}"
    ]
})

st.dataframe(comparison_df, use_container_width=True, hide_index=True)

# STEP 8: Add explanation
with st.expander("ðŸ’¡ Understanding the Metrics"):
    st.markdown("""
    ### Conversion Rate Calculation

    ```
    Conversion Rate = (Conversions / Visitors) Ã— 100%
    ```

    **Example:**
    - Visitors: 10,000
    - Conversions: 1,200
    - Rate: 1,200 / 10,000 = 0.12 = 12%

    ### Improvement Calculation

    ```
    Improvement = ((Rate B - Rate A) / Rate A) Ã— 100%
    ```

    **Example:**
    - Group A: 12%
    - Group B: 15%
    - Improvement: ((15% - 12%) / 12%) Ã— 100% = 25%

    This means Group B has a 25% improvement over Group A.

    ### Important Notes

    - **Sample size matters**: Larger samples = more reliable results
    - **Statistical significance**: Just seeing improvement isn't enough
    - **Practical significance**: Small improvements may not be worth implementing
    """)

st.divider()
st.caption("Built with Streamlit ðŸŽˆ")

```