```py
"""
Step 7: Adding Detailed Statistics in Expander
Learning objective: Add comprehensive text analysis in a collapsible section
"""

import streamlit as st
from collections import Counter
import pandas as pd

st.set_page_config(
    page_title="Text Analyzer",
    page_icon="ğŸ“",
    layout="wide"
)

st.title("ğŸ“ Text Analyzer")
st.write("Enter text to analyze its characteristics")

text = st.text_area("Enter your text here:", height=200,
                    placeholder="Type or paste your text...")

if text:
    # Basic statistics
    char_count = len(text)
    char_no_spaces = len(text.replace(" ", "").replace("\n", ""))
    word_count = len(text.split())
    sentence_count = text.count('.') + text.count('!') + text.count('?')

    vowels = "aeiouAEIOU"
    vowel_count = sum(1 for char in text if char in vowels)
    consonants = sum(1 for char in text if char.isalpha() and char not in vowels)

    col1, col2, col3, col4 = st.columns(4)

    with col1:
        st.metric("Characters", char_count)
        st.caption(f"Without spaces: {char_no_spaces}")

    with col2:
        st.metric("Words", word_count)

    with col3:
        st.metric("Sentences", max(sentence_count, 1))

    with col4:
        st.metric("Vowels", vowel_count)
        st.caption(f"Consonants: {consonants}")

    # Character frequency
    st.subheader("Character Frequency")

    letters_only = [char.lower() for char in text if char.isalpha()]

    if letters_only:
        freq = Counter(letters_only)
        most_common = freq.most_common(10)

        col1, col2 = st.columns([2, 1])

        with col1:
            df = pd.DataFrame(most_common, columns=['Character', 'Frequency'])
            st.bar_chart(df.set_index('Character'))

        with col2:
            st.write("**Top 10 Characters:**")
            for char, count in most_common:
                st.write(f"- **{char}**: {count}")

    # Detailed statistics in expander
    with st.expander("ğŸ“Š Detailed Statistics"):
        st.write(f"- **Average word length**: {char_no_spaces / max(word_count, 1):.2f} characters")
        st.write(f"- **Average sentence length**: {word_count / max(sentence_count, 1):.2f} words")
        st.write(f"- **Uppercase letters**: {sum(1 for c in text if c.isupper())}")
        st.write(f"- **Lowercase letters**: {sum(1 for c in text if c.islower())}")
        st.write(f"- **Digits**: {sum(1 for c in text if c.isdigit())}")
        st.write(f"- **Spaces**: {text.count(' ')}")

else:
    st.info("ğŸ‘† Enter some text above to see the analysis")

st.divider()
st.caption("Built with Streamlit ğŸˆ")

```